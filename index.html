<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teleportation Glasses - Interactive 3D Experience</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
    
    :root {
      --primary: #0b0a1d;
      --secondary: #1a133c;
      --accent: #9d4edd;
      --electric: #c77dff;
      --neon-glow: rgba(157, 78, 221, 0.5);
      --highlight: #f5c2e7;
      --shadow: rgba(157, 78, 221, 0.2);
      --transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at 30% 70%, #0b0a1d 0%, #05040d 100%);
      color: #fff;
      overflow-x: hidden;
      cursor: none;
      height: 100vh;
      line-height: 1.6;
    }

    /* Teleportation Lenses Hub Title */
.lenses-hub-title {
  position: fixed;
  top: 140px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Inter', sans-serif;
  font-size: 2.5rem;
  font-weight: 900;
  color: white;
  text-align: center;
  z-index: 200;
  background: linear-gradient(135deg, var(--accent), var(--electric));
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 20px rgba(157, 78, 221, 0.5);
  animation: titlePulse 3s ease-in-out infinite alternate;
}

/* Instruction Box */
.instruction-box {
  position: fixed;
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(11, 10, 29, 0.8);
  backdrop-filter: blur(10px);
  border: 2px solid rgba(157, 78, 221, 0.5);
  border-radius: 20px;
  padding: 20px 30px;
  max-width: 600px;
  width: 90%;
  text-align: center;
  z-index: 200;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  animation: slideInUp 0.8s ease-out forwards;
}

.instruction-box h3 {
  font-family: 'Inter', sans-serif;
  font-weight: 600;
  color: var(--highlight);
  margin-bottom: 10px;
  font-size: 1.2rem;
}

.instruction-box p {
  font-size: 1rem;
  color: rgba(255, 255, 255, 0.8);
  line-height: 1.5;
}

/* Animation for instruction box */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
    /* âœ¨ Custom Cursor System */
.cursor-system {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  pointer-events: none;
  z-index: 10000;
  filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.8));
}

.cursor-main {
  position: absolute;
  width: 16px;
  height: 16px;
  background: var(--electric);
  border-radius: 50%;
  mix-blend-mode: normal;
  transition: transform 0.1s ease-out;
  box-shadow: 0 0 15px var(--accent);
  z-index: 10001;
  will-change: transform;
  animation: pulse 2s infinite ease-in-out;
}

.cursor-glow {
  position: absolute;
  width: 60px;
  height: 60px;
  background: radial-gradient(circle, var(--accent) 0%, transparent 60%);
  border-radius: 50%;
  opacity: 0.5;
  mix-blend-mode: screen;
  transition: all 0.2s ease;
  z-index: 10000;
}

.cursor-trail {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  opacity: 0.9;
  background: var(--electric);
  z-index: 10000;
  will-change: transform, opacity;
  transition: opacity 0.2s ease-out;
}

@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

    /* âš¡ Instant-Load Portal */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: radial-gradient(circle at center, #0b0a1d 0%, #05040d 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .loading-content {
      text-align: center;
    }

    .portal-loader {
      position: relative;
      width: 120px;
      height: 120px;
      margin: 0 auto 20px;
    }

    .portal-ring {
      position: absolute;
      border-radius: 50%;
      border: 2px solid transparent;
    }

    .portal-ring.outer {
      width: 100%;
      height: 100%;
      border-top-color: var(--accent);
      border-bottom-color: var(--accent);
      animation: spin 2s linear infinite;
    }

    .portal-ring.middle {
      width: 70%;
      height: 70%;
      top: 15%;
      left: 15%;
      border-left-color: var(--electric);
      border-right-color: var(--electric);
      animation: spinReverse 1.8s linear infinite;
    }

    .portal-ring.inner {
      width: 40%;
      height: 40%;
      top: 30%;
      left: 30%;
      border-top-color: var(--highlight);
      border-bottom-color: var(--highlight);
      animation: spin 1.5s linear infinite;
    }

    .portal-core {
      position: absolute;
      width: 20%;
      height: 20%;
      top: 40%;
      left: 40%;
      background: var(--accent);
      border-radius: 50%;
      filter: blur(4px);
    }

    .progress-arc {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      clip: rect(0, 60px, 120px, 0);
      animation: loadComplete 1.2s cubic-bezier(0.77, 0, 0.175, 1) forwards;
    }

    .loading-text {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: 0.9rem;
      letter-spacing: 2px;
      color: var(--highlight);
      margin-bottom: 8px;
      text-transform: uppercase;
    }

    .percentage {
      font-family: 'Inter', sans-serif;
      font-weight: 700;
      font-size: 1rem;
      color: var(--electric);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes spinReverse {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(-360deg); }
    }

    @keyframes loadComplete {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(180deg); }
    }

    /* ðŸ“¦ App Container */
    .app-container {
      position: relative;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }

    /* ðŸŽ® 3D Scene Container */
    #three-scene {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    /* ðŸ§  UI Overlay */
    .ui-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 100;
      pointer-events: none;
    }

    /* Navigation System */
    .nav-system {
      position: fixed;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      background: rgba(11, 10, 29, 0.8);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(157, 78, 221, 0.3);
      border-radius: 50px;
      padding: 15px 25px;
      z-index: 200;
      pointer-events: all;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    }

    .nav-item {
      padding: 12px 24px;
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
      border-radius: 30px;
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.95rem;
      white-space: nowrap;
    }

    .nav-item:hover {
      color: var(--highlight);
      background: rgba(157, 78, 221, 0.2);
    }

    .nav-item.active {
      background: var(--accent);
      color: #fff;
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.5);
    }



    .panel-title {
      font-family: 'Inter', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--highlight);
      margin-bottom: 20px;
      background: linear-gradient(135deg, var(--accent), var(--electric));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .glasses-controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .glasses-button {
      background: linear-gradient(145deg, rgba(157, 78, 221, 0.1), rgba(199, 125, 255, 0.05));
      border: 2px solid rgba(157, 78, 221, 0.3);
      border-radius: 15px;
      padding: 20px;
      text-align: left;
      transition: var(--transition);
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .glasses-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(157, 78, 221, 0.2), transparent);
      opacity: 0;
      transition: var(--transition);
    }

    .glasses-button:hover {
      transform: translateY(-3px);
      border-color: var(--electric);
      box-shadow: 0 10px 30px rgba(157, 78, 221, 0.3);
    }

    .glasses-button:hover::before {
      opacity: 1;
    }

    .glasses-button.active {
      background: linear-gradient(135deg, rgba(157, 78, 221, 0.3), rgba(199, 125, 255, 0.2));
      border-color: var(--electric);
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.4);
    }

    .glasses-title {
      font-family: 'Inter', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--highlight);
      margin-bottom: 8px;
      transition: var(--transition);
    }

    .glasses-desc {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.7);
      transition: var(--transition);
    }

    .glasses-button:hover .glasses-title {
      color: var(--electric);
    }

    .glasses-button:hover .glasses-desc {
      color: rgba(255, 255, 255, 0.9);
    }

    @keyframes slideInLeft {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }



    
    .member-name {
      font-family: 'Inter', sans-serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--highlight);
      margin-bottom: 10px;
      background: linear-gradient(135deg, var(--accent), var(--electric));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .member-role {
      font-size: 0.9rem;
      color: var(--gold);
      margin-bottom: 15px;
      font-weight: 600;
    }

    .member-bio {
      font-size: 0.9rem;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.8);
    }





    /* Audio Visualizer */
    .audio-visualizer {
      position: fixed;
      top: 50%;
      left: 30px;
      transform: translateY(-50%);
      width: 60px;
      height: 200px;
      display: flex;
      align-items: end;
      gap: 3px;
      z-index: 200;
      pointer-events: none;
    }

    .visualizer-bar {
      width: 4px;
      background: linear-gradient(to top, var(--accent), var(--electric));
      border-radius: 2px;
      transition: height 0.1s ease;
    }

    /* Particle System Overlay */
    .particles-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 50;
    }

    /* Video Room Overlay */
    .video-room-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 400;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .video-room-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .video-container {
      width: 80vw;
      height: calc(80vw * 9 / 16);
      max-width: 1200px;
      max-height: calc(100vh - 100px);
      background: #000;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.8);
    }

    .video-header {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: rgba(11, 10, 29, 0.9);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 25px;
      z-index: 10;
    }

    .video-title {
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      color: var(--highlight);
      font-size: 1.2rem;
    }

    .video-close {
      width: 40px;
      height: 40px;
      background: rgba(157, 78, 221, 0.2);
      border: 2px solid var(--accent);
      border-radius: 50%;
      color: var(--accent);
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }

    .video-close:hover {
      background: var(--accent);
      color: #fff;
      transform: scale(1.1);
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.4);
    }

    .video-iframe-container {
      position: absolute;
      top: 60px;
      left: 0;
      width: 100%;
      height: calc(100% - 60px);
    }

    .video-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--accent);
      font-size: 1.3rem;
      text-align: center;
      padding: 30px;
    }

    /* Content Sections */
    .content-section {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(11, 10, 29, 0.95);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 300;
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      pointer-events: none;
    }

    .content-section.active {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }

    .section-content {
      max-width: 900px;
      width: 100%;
      text-align: center;
      padding: 60px;
      background: rgba(11, 10, 29, 0.95);
      border-radius: 30px;
      border: 2px solid rgba(157, 78, 221, 0.3);
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(20px);
      animation: contentSlideIn 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
      position: relative;
      margin: 20px;
      max-height: 90vh;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .section-content::-webkit-scrollbar {
      display: none;
    }

    .section-close {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 40px;
      height: 40px;
      background: rgba(157, 78, 221, 0.2);
      border: 2px solid var(--accent);
      border-radius: 50%;
      color: var(--accent);
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      backdrop-filter: blur(10px);
    }

    .section-close:hover {
      background: var(--accent);
      color: #fff;
      transform: scale(1.1);
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.4);
    }

    @keyframes contentSlideIn {
      from {
        transform: translateY(50px) scale(0.9);
        opacity: 0;
      }
      to {
        transform: translateY(0) scale(1);
        opacity: 1;
      }
    }

    .section-title {
      font-family: 'Inter', sans-serif;
      font-size: 3rem;
      font-weight: 900;
      background: linear-gradient(135deg, var(--accent), var(--electric));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 30px;
      animation: titlePulse 3s ease-in-out infinite alternate;
    }

    @keyframes titlePulse {
      from { filter: drop-shadow(0 0 10px var(--accent)); }
      to { filter: drop-shadow(0 0 30px var(--electric)); }
    }




  /* Team Grid */
  .team-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Fixed 3 columns */
    gap: 25px;
    margin-top: 30px;
    width: 100%;
  }

  /* Rest of your CSS remains the same */
  .team-card {
    background: linear-gradient(145deg, rgba(157, 78, 221, 0.1), rgba(199, 125, 255, 0.05));
    border: 2px solid rgba(157, 78, 221, 0.3);
    border-radius: 20px;
    padding: 25px 20px;
    text-align: center;
    transition: var(--transition);
    width: 100%;
    max-width: 100%;
  }

  .team-card:hover {
    transform: translateY(-8px) scale(1.02);
    border-color: var(--electric);
    box-shadow: 0 15px 50px rgba(157, 78, 221, 0.4);
  }

  .team-avatar {
    width: 90px;
    height: 90px;
    background: linear-gradient(135deg, var(--accent), var(--electric));
    border-radius: 50%;
    margin: 0 auto 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.2rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    box-shadow: 0 6px 20px rgba(157, 78, 221, 0.4);
    font-family: 'Inter', sans-serif;
  }

  .team-name {
    font-family: 'Inter', sans-serif;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--highlight);
    margin-bottom: 6px;
    background: linear-gradient(135deg, var(--accent), var(--electric));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .team-role {
    font-size: 0.9rem;
    color: var(--highlight);
    font-weight: 600;
    margin-bottom: 12px;
  }

  .team-bio {
    font-size: 0.85rem;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.8);
  }


    /* Experience Video */
    .experience-video-container {
      width: 100%;
      max-width: 800px;
      margin: 40px auto;
    }

    .experience-video-frame {
      width: 100%;
      aspect-ratio: 16/9;
      border-radius: 20px;
      border: 3px solid var(--electric);
      box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.8),
        0 0 30px rgba(157, 78, 221, 0.3);
      overflow: hidden;
      background: var(--primary);
      position: relative;
    }

    .experience-video-iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 17px;
    }

    .experience-video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: var(--accent);
      font-size: 1.3rem;
      text-align: center;
      padding: 30px;
    }

    /* Video Experience Styles */
    .video-section {
      display: none;
      margin-top: 30px;
    }

    .video-section.active-video-section {
      display: block;
    }

    .decision-point {
      background: linear-gradient(145deg, rgba(157, 78, 221, 0.1), rgba(199, 125, 255, 0.05));
      padding: 30px;
      border-radius: 20px;
      margin: 30px auto;
      max-width: 600px;
      border: 2px solid rgba(157, 78, 221, 0.3);
      display: none;
    }

    .decision-point.active-decision {
      display: block;
    }

    .decision-point h2 {
      font-family: 'Inter', sans-serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--highlight);
      margin-bottom: 15px;
      background: linear-gradient(135deg, var(--accent), var(--electric));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .decision-point p {
      font-size: 1.1rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 25px;
    }

    .decision-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .decision-buttons button {
      background: linear-gradient(145deg, var(--accent), var(--electric));
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.3);
      font-family: 'Inter', sans-serif;
    }

    .decision-buttons button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(157, 78, 221, 0.5);
      filter: brightness(1.1);
    }

    .ending-section {
      text-align: center;
      margin-top: 30px;
    }

    .ending-section h2 {
      font-family: 'Inter', sans-serif;
      font-size: 2rem;
      font-weight: 700;
      color: var(--highlight);
      margin: 20px 0;
      background: linear-gradient(135deg, var(--accent), var(--electric));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .ending-section p {
      font-size: 1.2rem;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 30px;
      line-height: 1.6;
    }

    .restart-button {
      background: linear-gradient(145deg, var(--accent), var(--electric));
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 30px;
      cursor: pointer;
      font-size: 1.1rem;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: 0 5px 20px rgba(157, 78, 221, 0.3);
      margin-top: 20px;
    }

    .restart-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(157, 78, 221, 0.5);
      filter: brightness(1.1);
    }

    /* Teleport Flash Effect */
    .teleport-flash {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: radial-gradient(circle, rgba(157, 78, 221, 0.7) 0%, transparent 70%);
      pointer-events: none;
      z-index: 9998;
      animation: teleportFlash 0.5s ease-out forwards;
    }
    
    @keyframes teleportFlash {
      0% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1); }
      100% { opacity: 0; transform: scale(1.5); }
    }

    /* Responsive Design */
    @media (max-width: 1024px) {
      .section-content {
        padding: 40px 30px;
        margin: 15px;
      }
      
      .team-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
      }
      
   
    }

    @media (max-width: 768px) {
      body {
        cursor: auto;
      }
      
      .cursor-system {
        display: none;
      }
      
      .nav-system {
        top: 20px;
        padding: 12px 20px;
        gap: 10px;
      }
      
      .nav-item {
        padding: 10px 16px;
        font-size: 0.85rem;
      }
      
      .section-content {
        padding: 30px 20px;
        margin: 10px;
        border-radius: 20px;
        max-height: calc(100vh - 20px);
      }
      
      .section-title {
        font-size: 2rem;
        margin-bottom: 20px;
      }
      
      .section-description {
        font-size: 1.1rem;
        margin-bottom: 30px;
      }
      
      .team-grid {
        grid-template-columns: 1fr;
        gap: 20px;
        margin-top: 30px;
      }
      
      .team-card {
        padding: 25px 20px;
      }
      
      .team-avatar {
        width: 80px;
        height: 80px;
        font-size: 2rem;
        margin-bottom: 15px;
      }
      
      .team-name {
        font-size: 1.2rem;
      }
      
      .team-role {
        font-size: 0.9rem;
      }
      
      .team-bio {
        font-size: 0.85rem;
      }
      

      
      .team-revealer {
        left: 10px;
        bottom: 10px;
        right: 10px;
        max-width: none;
        padding: 15px;
      }

      .video-container {
        width: calc(100vw - 20px);
        height: calc((100vw - 20px) * 9 / 16);
        margin: 10px;
        max-height: calc(100vh - 40px);
      }
      
      .video-header {
        height: 50px;
        padding: 0 15px;
      }
      
      .video-title {
        font-size: 1.1rem;
      }
      
      .video-close {
        width: 30px;
        height: 30px;
        font-size: 1rem;
      }
      

      
      .section-close {
        top: 15px;
        right: 15px;
        width: 35px;
        height: 35px;
        font-size: 1.3rem;
      }
      
      .bts-content {
        margin-top: 25px;
      }
      
      .bts-content h3 {
        font-size: 1.3rem;
        margin-bottom: 15px;
      }
      
      .bts-content p {
        font-size: 1rem;
        margin-bottom: 15px;
      }
      
      .experience-video-container {
        margin: 30px auto;
      }
      
      .experience-video-frame {
        border-radius: 15px;
        border-width: 2px;
      }
      
      .experience-video-placeholder {
        font-size: 1.1rem;
        padding: 20px;
      }

      .decision-buttons {
        flex-direction: column;
        gap: 15px;
      }

      .decision-buttons button {
        width: 100%;
      }
    }

    @media (max-width: 480px) {
      .nav-system {
        top: 10px;
        left: 10px;
        right: 10px;
        padding: 10px 15px;
        gap: 8px;
        transform: none;
        width: calc(100vw - 20px);
      }
      
      .nav-item {
        padding: 8px 12px;
        font-size: 0.8rem;
        flex: 1;
        text-align: center;
      }
      
      .section-content {
        padding: 20px 15px;
        margin: 5px;
      }
      
      .section-title {
        font-size: 1.8rem;
      }
      
      .section-description {
        font-size: 1rem;
      }
      
      .team-card {
        padding: 20px 15px;
      }
      
      .team-avatar {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
      }
      

      
      .panel-title {
        font-size: 1.3rem;
        margin-bottom: 15px;
      }
      
      .glasses-button {
        padding: 15px;
      }
      
      .glasses-title {
        font-size: 1rem;
      }
      
      .glasses-desc {
        font-size: 0.85rem;
      }
      
      .video-container {
        width: calc(100vw - 10px);
        height: calc((100vw - 10px) * 9 / 16);
        margin: 5px;
      }
      
      .experience-video-container {
        margin: 20px auto;
      }
      
      .experience-video-frame {
        border-radius: 12px;
        border-width: 2px;
      }
      
      .experience-video-placeholder {
        font-size: 1rem;
        padding: 15px;
      }
    }
  </style>
</head>
<body>
<!-- Loading Screen -->
<div class="loading-screen" id="loadingScreen">
  <div class="loading-content">
    <div class="portal-loader">
      <div class="portal-ring outer"></div>
      <div class="portal-ring middle"></div>
      <div class="portal-ring inner"></div>
      <div class="portal-core"></div>
      <div class="progress-arc"></div>
    </div>
    <div class="loading-text">ENGAGING TELEPORTATION</div>
    <div class="percentage">0%</div>
  </div>
</div>

<!-- Advanced Cursor System -->
<div class="cursor-system">
  <div class="cursor-main"></div>
  <div class="cursor-glow"></div>
</div>

<!-- Main App Container -->
<div class="app-container">
  <!-- 3D Scene -->
  <canvas id="three-scene"></canvas>
  
  <!-- Particles Overlay -->
  <div class="particles-overlay" id="particlesOverlay"></div>

  <!-- Video Room Overlay -->
  <div class="video-room-overlay" id="videoRoomOverlay">
    <div class="video-container">
      <div class="video-header">
        <div class="video-title">Purple Glasses Interactive Experience</div>
        <button class="video-close" onclick="closeVideoRoom()">Ã—</button>
      </div>
      <div class="video-iframe-container">
        <iframe 
          class="video-iframe"
          src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
          title="Purple Glasses Interactive Experience"
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
          allowfullscreen>
        </iframe>
        <div class="video-placeholder">
          <div>Interactive Video Experience</div>
          <small style="margin-top: 15px; font-size: 1rem; opacity: 0.7;">
            Replace the YouTube URL in the iframe src to show your video
          </small>
        </div>
      </div>
    </div>
  </div>



  <!-- UI Overlay -->
  <div class="ui-overlay">
    <!-- Futuristic Navigation -->
    <nav class="nav-system">
      <div class="nav-item active" data-scene="room">Room</div>
      <div class="nav-item" data-scene="video">Experience</div>
      <div class="nav-item" data-scene="team">Team</div>
      <div class="nav-item" data-scene="behind">BTS</div>
    </nav>


<!-- Content Sections -->
<!-- Video Experience Section -->
<div class="content-section" id="section-video">
  <div class="section-content">
    <button class="section-close" onclick="closeSection()">Ã—</button>
    <h1 class="section-title">Glasses On</h1>
    
    <!-- Intro Video Section -->
    <div id="intro-section" class="video-section active-video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="intro-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1&autoplay=1" 
            title="Purple Glasses Intro"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
    </div>

    <!-- Jump 1 Video Section -->
    <div id="jump1-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="jump1-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Purple Glasses Jump"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
    </div>

    <!-- Decision 1: Where to go? -->
    <div id="decision1-section" class="decision-point">
      <h2>Where should I go?</h2>
      <p>The teleportation worked, but now you need to choose your destination.</p>
      <div class="decision-buttons">
        <button id="dorm-choice">Back to Dorm Room</button>
        <button id="bathroom-choice">Bathroom</button>
      </div>
    </div>

    <!-- Dorm Branch -->
    <div id="dorm-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="dorm-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Dorm Room Branch"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
    </div>

    <!-- Bathroom Branch -->
    <div id="bathroom-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="bathroom-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Bathroom Branch"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
    </div>

    <!-- Final Return -->
    <div id="final-return-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="final-return-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Final Return"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
    </div>

    <!-- Decision 2: What now? -->
    <div id="decision2-section" class="decision-point">
      <h2>What now?</h2>
      <p>The laptop screen says: "Welcome back. Choose wisely."</p>
      <div class="decision-buttons">
        <button id="use-glasses">Use glasses again</button>
        <button id="destroy-glasses">Destroy the glasses</button>
      </div>
    </div>

    <!-- Ending Use -->
    <div id="ending-use-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="ending-use-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Ending - Use Glasses"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
      <div class="ending-section">
        <button class="restart-button" id="restart-btn1">Restart Experience</button>
      </div>
    </div>

    <!-- Ending Destroy -->
    <div id="ending-destroy-section" class="video-section">
      <div class="experience-video-container">
        <div class="experience-video-frame">
          <iframe 
            id="ending-destroy-video"
            class="experience-video-iframe"
            src="https://www.youtube.com/embed/AoM1GtX3Oko?enablejsapi=1" 
            title="Ending - Destroy Glasses"
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share">
          </iframe>
        </div>
      </div>
      <div class="ending-section">
        <button class="restart-button" id="restart-btn2">Restart Experience</button>
      </div>
    </div>

      <p class="section-description" style="margin-top: 20px;">
        Wear the glasses and unlock teleportation â€” each view leads to a new reality.
      </p>
    </div>
  </div>

  <!-- Team Section -->
  <div class="content-section" id="section-team">
    <div class="section-content">
      <button class="section-close" onclick="closeSection()">Ã—</button>
      <h1 class="section-title">Meet the Visionaries</h1>
      <p class="section-description">
        The creative minds who transformed a simple concept into an immersive experience. 
        Each brought their unique perspective to craft something extraordinary.
      </p>
      
      <div class="team-grid">
        <div class="team-card">
          <div class="team-avatar">M</div>
          <div class="team-name">Meera Alzaabi</div>C
          <div class="team-role">reative Director & Visionary</div>
          <div class="team-bio">
            The driving force behind the projectâ€™s concept and digital world, Meera brought the website to life and crafted the teleportation journeysâ€”transforming the glasses into a portal of immersive storytelling.          </div>
        </div>
        
        <div class="team-card">
          <div class="team-avatar">A</div>
          <div class="team-name">Ahmad Hijazi</div>
          <div class="team-role">Project Leader & Director</div>
          <div class="team-bio">
            Ahmad led the projectâ€™s direction, shaped the narrative structure, and directed every sceneâ€”ensuring the glasses experience was cohesive, dynamic, and deeply engaging.
          </div>
        </div>
        
        <div class="team-card">
          <div class="team-avatar">A</div>
          <div class="team-name">Abdelrahman Khater</div>
          <div class="team-role">Performance & Visual Effects Director</div>
          <div class="team-bio">
            Abdelrahman brought characters to life and infused every scene with emotional depth, visual flair, and polished effectsâ€”turning each path into a vivid cinematic experience.
          </div>
        </div>
      </div>
    </div>
  </div>
    

  <!-- Teleportation Lenses Hub Title -->
<div class="lenses-hub-title">Teleport Through Sight</div>

<!-- Instruction Box -->
<div class="instruction-box">
  <h3>Explore the Teleportation Glasses</h3>
  <p>Explore with your mouse. Click the lenses, then tap Experience to Teleport.</p>
</div>



<!-- Behind the Scenes Section -->
<div class="content-section" id="section-behind">
  <div class="section-content">
    <button class="section-close" onclick="closeSection()">Ã—</button>
    <h1 class="section-title">Behind the Magic</h1>


    <!-- just replace scr with ur youtube link -->
    <div class="experience-video-container">
      <div class="experience-video-frame">
        <iframe 
          id="bts-video"
          class="experience-video-iframe"
          src="https://www.youtube.com/embed/AoM1GtX3Oko?si=qFlKmqEySsK0h9oU"  
          title="Behind the Scenes"
          frameborder="0" 
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
          allowfullscreen>
        </iframe>


        <!-- Fallback placeholder (only shows if video fails to load) -->
        <div class="experience-video-placeholder" style="display: none;">
          <div>Your Behind the Scenes Video Here</div>
          <small style="margin-top: 15px; font-size: 1rem; opacity: 0.7;">
            Replace the YouTube URL in the iframe src above with your actual BTS video
          </small>
        </div>
      </div>

      <p class="section-description">
        A peek into how the teleportation magic was made â€” from concept to execution.
      </p>
    </div>
  </div>
</div>




    <!-- Audio Visualizer -->
    <div class="audio-visualizer" id="audioVisualizer">
      <!-- Bars will be generated by JS -->
    </div>

    

<!-- Three.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>




<script>

// Advanced Cursor System
class AdvancedCursor {
  constructor() {
    this.cursor = document.querySelector('.cursor-main');
    this.glow = document.querySelector('.cursor-glow');
    this.trails = [];
    this.mouse = { x: 0, y: 0 };
    this.pos = { x: 0, y: 0 };
    
    // Check if mobile
    if (window.matchMedia("(max-width: 768px)").matches) {
      document.querySelector('.cursor-system').style.display = 'none';
      return;
    }
    
    this.init();
  }

  init() {
    // Create trail elements
    for (let i = 0; i < 10; i++) {
      const trail = document.createElement('div');
      trail.className = 'cursor-trail';
      trail.style.background = `hsl(${270 + i * 3}, 80%, ${60 - i * 2}%)`;
      trail.style.width = trail.style.height = `${6 - i * 0.3}px`;
      document.querySelector('.cursor-system').appendChild(trail);
      this.trails.push({
        element: trail,
        x: 0,
        y: 0,
        delay: i * 2
      });
    }

    document.addEventListener('mousemove', (e) => {
      this.mouse.x = e.clientX;
      this.mouse.y = e.clientY;
    });

    this.animate();
  }

  animate() {
    if (!this.cursor) return;
    
    this.pos.x += (this.mouse.x - this.pos.x) * 0.3;
    this.pos.y += (this.mouse.y - this.pos.y) * 0.3;

    this.cursor.style.left = this.pos.x + 'px';
    this.cursor.style.top = this.pos.y + 'px';
    this.glow.style.left = this.pos.x + 'px';
    this.glow.style.top = this.pos.y + 'px';

    // Animate trails
    this.trails.forEach((trail, index) => {
      const delay = index * 0.1;
      trail.x += (this.pos.x - trail.x) * (0.2 - delay * 0.005);
      trail.y += (this.pos.y - trail.y) * (0.2 - delay * 0.005);
      
      trail.element.style.left = trail.x + 'px';
      trail.element.style.top = trail.y + 'px';
      trail.element.style.opacity = 1 - index * 0.1;
    });

    requestAnimationFrame(() => this.animate());
  }
}

// Slower, Smoother Loading System (3-4 seconds total)
window.addEventListener('load', () => {
  const loadingScreen = document.getElementById('loadingScreen');
  const percentage = document.querySelector('.percentage');
  
  // Add portal particles
  const portalCore = document.querySelector('.portal-core');
  for (let i = 0; i < 12; i++) {
    const particle = document.createElement('div');
    particle.className = 'portal-particle';
    particle.style.setProperty('--tx', `${Math.random() * 40 - 20}px`);
    particle.style.setProperty('--ty', `${Math.random() * -60 - 30}px`);
    particle.style.left = `${Math.random() * 100}%`;
    particle.style.top = `${Math.random() * 100}%`;
    particle.style.animationDelay = `${Math.random() * 1.5}s`;
    portalCore.appendChild(particle);
  }

  let progress = 0;
  const minIncrement = 1;  // Minimum percentage increment
  const maxIncrement = 4;  // Maximum percentage increment
  const baseInterval = 100; // Base interval in ms
  
  const interval = setInterval(() => {
    // Calculate increment with easing - slows down as it approaches 100%
    const remaining = 100 - progress;
    const increment = Math.min(
      Math.max(minIncrement, Math.floor(remaining * 0.1 + 0.5)), // Never less than minIncrement
      maxIncrement // Never more than maxIncrement
    );
    
    progress += increment;
    
    // Add some random variation to make it feel more organic
    const randomVariation = Math.random() > 0.7 ? Math.floor(Math.random() * 2) : 0;
    progress = Math.min(progress + randomVariation, 100);
    
    percentage.textContent = `${progress}%`;
    
    if(progress === 100) {
      clearInterval(interval);
      // Smooth fade out
      loadingScreen.style.transition = 'opacity 0.8s ease-out';
      loadingScreen.style.opacity = '0';
      setTimeout(() => {
        loadingScreen.style.visibility = 'hidden';
        initAllSystems();
      }, 800); // Wait for fade out to complete
    }
  }, baseInterval + Math.random() * 50); // Slightly randomized intervals
});

// YouTube Player API for Video Experience
let players = {};

function initYouTubePlayers() {
  const tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  const firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
}

window.onYouTubeIframeAPIReady = function() {
  // Create players for all video iframes
  createPlayer('intro-video', 'AoM1GtX3Oko', onIntroEnd);
  createPlayer('jump1-video', 'AoM1GtX3Oko', onJump1End);
  createPlayer('dorm-video', 'AoM1GtX3Oko', onDormEnd);
  createPlayer('bathroom-video', 'AoM1GtX3Oko', onBathroomEnd);
  createPlayer('final-return-video', 'AoM1GtX3Oko', onFinalReturnEnd);
  createPlayer('ending-use-video', 'AoM1GtX3Oko');
  createPlayer('ending-destroy-video', 'AoM1GtX3Oko');
};

function createPlayer(elementId, videoId, onEndCallback) {
  players[elementId] = new YT.Player(elementId, {
    videoId: videoId,
    events: {
      'onReady': onPlayerReady,
      'onStateChange': function(event) {
        if (event.data === YT.PlayerState.ENDED && onEndCallback) {
          onEndCallback();
        }
      }
    },
    playerVars: {
      'autoplay': 0,
      'controls': 1,
      'rel': 0,
      'modestbranding': 1,
      'mute': 1
    }
  });
}

function onPlayerReady(event) {
  // Player is ready
}

// Video progression callbacks
function onIntroEnd() {
  hideAllVideoSections();
  document.getElementById('jump1-section').classList.add('active-video-section');
  players['jump1-video'].playVideo();
}

function onJump1End() {
  hideAllVideoSections();
  document.getElementById('decision1-section').classList.add('active-decision');
}

function onDormEnd() {
  hideAllVideoSections();
  document.getElementById('final-return-section').classList.add('active-video-section');
  players['final-return-video'].playVideo();
}

function onBathroomEnd() {
  hideAllVideoSections();
  document.getElementById('final-return-section').classList.add('active-video-section');
  players['final-return-video'].playVideo();
}

function onFinalReturnEnd() {
  hideAllVideoSections();
  document.getElementById('decision2-section').classList.add('active-decision');
}

function hideAllVideoSections() {
  document.querySelectorAll('.video-section').forEach(section => {
    section.classList.remove('active-video-section');
  });
  document.querySelectorAll('.decision-point').forEach(section => {
    section.classList.remove('active-decision');
  });
}

function restartExperience() {
  hideAllVideoSections();
  document.getElementById('intro-section').classList.add('active-video-section');
  if (players['intro-video']) {
    players['intro-video'].seekTo(0);
    players['intro-video'].playVideo();
  }
}

// Initialize video experience buttons
document.addEventListener('DOMContentLoaded', function() {
  // Initialize YouTube players
  initYouTubePlayers();
  
  // Decision buttons
  const dormChoice = document.getElementById('dorm-choice');
  const bathroomChoice = document.getElementById('bathroom-choice');
  const useGlasses = document.getElementById('use-glasses');
  const destroyGlasses = document.getElementById('destroy-glasses');
  const restartBtn1 = document.getElementById('restart-btn1');
  const restartBtn2 = document.getElementById('restart-btn2');
  
  if (dormChoice) {
    dormChoice.addEventListener('click', function() {
      hideAllVideoSections();
      document.getElementById('dorm-section').classList.add('active-video-section');
      players['dorm-video'].playVideo();
    });
  }
  
  if (bathroomChoice) {
    bathroomChoice.addEventListener('click', function() {
      hideAllVideoSections();
      document.getElementById('bathroom-section').classList.add('active-video-section');
      players['bathroom-video'].playVideo();
    });
  }
  
  if (useGlasses) {
    useGlasses.addEventListener('click', function() {
      hideAllVideoSections();
      document.getElementById('ending-use-section').classList.add('active-video-section');
      players['ending-use-video'].playVideo();
    });
  }
  
  if (destroyGlasses) {
    destroyGlasses.addEventListener('click', function() {
      hideAllVideoSections();
      document.getElementById('ending-destroy-section').classList.add('active-video-section');
      players['ending-destroy-video'].playVideo();
    });
  }
  
  if (restartBtn1) {
    restartBtn1.addEventListener('click', restartExperience);
  }
  
  if (restartBtn2) {
    restartBtn2.addEventListener('click', restartExperience);
  }
});

function initAllSystems() {
  // Initialize all systems
  const cursor = new AdvancedCursor();
  const scene = new ImmersiveScene();
  const audioVisualizer = new AudioVisualizer();
  const teamSystem = new TeamSystem();
  const interactionSystem = new InteractionSystem();
  const navigationSystem = new NavigationSystem();

  // Make available globally if needed
  window.app = {
    cursor,
    scene,
    audioVisualizer,
    teamSystem,
    interactionSystem,
    navigationSystem
  };
}

// Immersive 3D Scene (Updated with VR Teleportation Glasses)
class ImmersiveScene {
  constructor() {
    this.scene = new THREE.Scene();
    this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    this.renderer = new THREE.WebGLRenderer({ 
      canvas: document.getElementById('three-scene'),
      antialias: true,
      alpha: true
    });
    
    this.mouse = new THREE.Vector2();
    this.raycaster = new THREE.Raycaster();
    this.glasses = null;
    this.particles = [];
    this.lights = [];
    this.rooms = [];
    this.currentRoom = 0;
    
    this.init();
  }

  init() {
    // Renderer setup
    this.renderer.setSize(window.innerWidth, window.innerHeight);
    this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    this.renderer.shadowMap.enabled = true;
    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap;
    this.renderer.toneMapping = THREE.ACESFilmicToneMapping;
    this.renderer.toneMappingExposure = 1.2;

    // Optimized camera setup
    this.camera.position.set(0, 0.15, 2.5);
    this.camera.lookAt(0, 0, 0);
    this.camera.fov = 55;
    this.camera.updateProjectionMatrix();

    // Create scene elements
    this.createRooms();
    this.createGlasses();
    this.createLighting();
    this.createParticles();
    this.setupInteractions();
    
    this.animate();
  }

  createRooms() {
    // (Keep original room creation code unchanged)
    // ... [Previous room creation code] ...
  }

  createGlasses() {
    const glasses = new THREE.Group();
    
    // Frame material - purple like the reference
    const frameMaterial = new THREE.MeshPhongMaterial({
        color: 0x8a2be2,
        specular: 0x666666,
        shininess: 60,
        metalness: 0.95,
        roughness: 0.05,
        envMapIntensity: 0.5
    });
    
    // Left lens frame
    const leftFrameGeometry = new THREE.TorusGeometry(0.8, 0.15, 8, 16);
    const leftFrame = new THREE.Mesh(leftFrameGeometry, frameMaterial);
    leftFrame.position.set(-1.3, 0, 0);
    leftFrame.rotation.z = Math.PI/2;
    glasses.add(leftFrame);
    
    // Right lens frame
    const rightFrame = new THREE.Mesh(leftFrameGeometry, frameMaterial);
    rightFrame.position.set(1.3, 0, 0);
    rightFrame.rotation.z = Math.PI/2;
    glasses.add(rightFrame);
    
    // Bridge connecting the frames
    const bridgeGeometry = new THREE.CylinderGeometry(0.08, 0.08, 1, 16);
    const bridge = new THREE.Mesh(bridgeGeometry, frameMaterial);
    bridge.rotation.z = Math.PI/2;
    bridge.position.set(0, 0, 0);
    glasses.add(bridge);
    
    // Temple arms
    const templeGeometry = new THREE.BoxGeometry(0.1, 0.15, 2.5);
    
    const leftTemple = new THREE.Mesh(templeGeometry, frameMaterial);
    leftTemple.position.set(-2.2, 0, -1);
    leftTemple.rotation.y = -0.1;
    glasses.add(leftTemple);
    
    const rightTemple = new THREE.Mesh(templeGeometry, frameMaterial);
    rightTemple.position.set(2.2, 0, -1);
    rightTemple.rotation.y = 0.1;
    glasses.add(rightTemple);
    
    // Temple hinges
    const hingeGeometry = new THREE.CylinderGeometry(0.06, 0.06, 0.2, 8);
    const leftHinge = new THREE.Mesh(hingeGeometry, frameMaterial);
    leftHinge.position.set(-2.1, 0, 0);
    leftHinge.rotation.x = Math.PI/2;
    glasses.add(leftHinge);
    
    const rightHinge = new THREE.Mesh(hingeGeometry, frameMaterial);
    rightHinge.position.set(2.1, 0, 0);
    rightHinge.rotation.x = Math.PI/2;
    glasses.add(rightHinge);
    
    // Purple energy lenses
    const lensGeometry = new THREE.CircleGeometry(0.7, 32);
    const lensMaterial = new THREE.MeshPhysicalMaterial({
        color: 0x4a148c,
        transmission: 0.7,
        roughness: 0.01,
        thickness: 0.1,
        ior: 1.45,
        clearcoat: 0.5,
        clearcoatRoughness: 0.05,
        transparent: true,
        opacity: 0.8,
        side: THREE.DoubleSide
    });
    
    const leftLens = new THREE.Mesh(lensGeometry, lensMaterial);
    leftLens.position.set(-1.3, 0, 0.05);
    glasses.add(leftLens);
    
    const rightLens = new THREE.Mesh(lensGeometry, lensMaterial);
    rightLens.position.set(1.3, 0, 0.05);
    glasses.add(rightLens);
    
    // Energy effects inside lenses
    const energyRingGeometry = new THREE.RingGeometry(0.2, 0.4, 16);
    const energyMaterial = new THREE.MeshBasicMaterial({
        color: 0xe91e63,
        transparent: true,
        opacity: 0.9,
        side: THREE.DoubleSide,
        blending: THREE.AdditiveBlending
    });
    
    const leftEnergyRing = new THREE.Mesh(energyRingGeometry, energyMaterial);
    leftEnergyRing.position.set(-1.3, 0, 0.1);
    glasses.add(leftEnergyRing);
    
    const rightEnergyRing = new THREE.Mesh(energyRingGeometry, energyMaterial);
    rightEnergyRing.position.set(1.3, 0, 0.1);
    glasses.add(rightEnergyRing);
    
    // Inner energy cores
    const coreGeometry = new THREE.CircleGeometry(0.15, 16);
    const coreMaterial = new THREE.MeshBasicMaterial({
        color: 0xff1744,
        transparent: true,
        opacity: 1,
        side: THREE.DoubleSide,
        blending: THREE.AdditiveBlending
    });
    
    const leftCore = new THREE.Mesh(coreGeometry, coreMaterial);
    leftCore.position.set(-1.3, 0, 0.12);
    glasses.add(leftCore);
    
    const rightCore = new THREE.Mesh(coreGeometry, coreMaterial);
    rightCore.position.set(1.3, 0, 0.12);
    glasses.add(rightCore);
    
    // Nose pads
    const nosePadGeometry = new THREE.SphereGeometry(0.08, 8, 8);
    const nosePadMaterial = new THREE.MeshPhongMaterial({
        color: 0x333333,
        specular: 0x666666,
        shininess: 50
    });
    
    const leftNosePad = new THREE.Mesh(nosePadGeometry, nosePadMaterial);
    leftNosePad.position.set(-0.5, -0.3, 0.2);
    glasses.add(leftNosePad);
    
    const rightNosePad = new THREE.Mesh(nosePadGeometry, nosePadMaterial);
    rightNosePad.position.set(0.5, -0.3, 0.2);
    glasses.add(rightNosePad);
    
    // Small tech accents on the frame
    const techAccentGeometry = new THREE.BoxGeometry(0.1, 0.1, 0.05);
    const techMaterial = new THREE.MeshPhongMaterial({
        color: 0x666666,
        specular: 0x999999,
        shininess: 80
    });
    
    const leftAccent = new THREE.Mesh(techAccentGeometry, techMaterial);
    leftAccent.position.set(-2.1, 0.2, 0);
    glasses.add(leftAccent);
    
    const rightAccent = new THREE.Mesh(techAccentGeometry, techMaterial);
    rightAccent.position.set(2.1, 0.2, 0);
    glasses.add(rightAccent);
    
    // Positioning and scale
    glasses.position.set(0, 0.1, 0.5);
    glasses.scale.set(0.3, 0.3, 0.3); // Scaled down to fit the scene
    glasses.rotation.set(0, Math.PI, 0);
    
    // Interactive lighting
    const rimLight = new THREE.PointLight(0x9d4edd, 0.4, 1);
    rimLight.position.set(0, 0, 0.2);
    glasses.add(rimLight);

    this.scene.add(glasses);
    this.glasses = glasses;
    this.glasses.userData = {
        isActive: false,
        lensEffect: { 
            material: lensMaterial,
            energyMaterial: energyMaterial,
            coreMaterial: coreMaterial
        },
        animation: {
            energyRing: [leftEnergyRing, rightEnergyRing],
            core: [leftCore, rightCore]
        }
    };
  }


  createLighting() {
    // Ambient light
    const ambientLight = new THREE.AmbientLight(0x404040, 0.3);
    this.scene.add(ambientLight);

    // Main light
    const mainLight = new THREE.DirectionalLight(0xffffff, 1);
    mainLight.position.set(5, 10, 5);
    mainLight.castShadow = true;
    mainLight.shadow.mapSize.width = 2048;
    mainLight.shadow.mapSize.height = 2048;
    this.scene.add(mainLight);

    // Purple accent lights
    const positions = [
      { x: -6, y: 3, z: 5 },
      { x: 6, y: 3, z: 5 },
      { x: 0, y: 5, z: 0 }
    ];

    positions.forEach(pos => {
      const light = new THREE.PointLight(0x800080, 0.8, 10);
      light.position.set(pos.x, pos.y, pos.z);
      this.lights.push(light);
      this.scene.add(light);
    });
  }

  createParticles() {
    const particleGeometry = new THREE.BufferGeometry();
    const particleCount = window.matchMedia("(max-width: 768px)").matches ? 300 : 1000;
    
    const positions = new Float32Array(particleCount * 3);
    const colors = new Float32Array(particleCount * 3);
    
    for (let i = 0; i < particleCount; i++) {
      positions[i * 3] = (Math.random() - 0.5) * 50;
      positions[i * 3 + 1] = (Math.random() - 0.5) * 30;
      positions[i * 3 + 2] = (Math.random() - 0.5) * 50;
      
      const color = new THREE.Color();
      color.setHSL(0.8, 0.8, 0.5 + Math.random() * 0.3);
      colors[i * 3] = color.r;
      colors[i * 3 + 1] = color.g;
      colors[i * 3 + 2] = color.b;
    }
    
    particleGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    particleGeometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    
    const particleMaterial = new THREE.PointsMaterial({
      size: 0.1,
      vertexColors: true,
      transparent: true,
      opacity: 0.6,
      blending: THREE.AdditiveBlending
    });
    
    const particles = new THREE.Points(particleGeometry, particleMaterial);
    this.scene.add(particles);
    this.particles.push(particles);
  }

  setupInteractions() {
    document.addEventListener('mousemove', (event) => {
      this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
      this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
    });

    document.addEventListener('click', () => {
      this.raycaster.setFromCamera(this.mouse, this.camera);
      const intersects = this.raycaster.intersectObject(this.glasses, true);
      
      if (intersects.length > 0) {
        this.useGlasses();
      }
    });
  }

  useGlasses() {
    if (this.glasses.userData.isActive) return;
    
    this.glasses.userData.isActive = true;
    
    // Activate lens effect
    const lens = this.glasses.userData.lensEffect;
    const flashDuration = 1000;
    const startTime = Date.now();
    
    const animateFlash = () => {
        const elapsed = Date.now() - startTime;
        const progress = elapsed / flashDuration;
        
        if (progress < 1) {
            // Intense flash at midpoint
            const intensity = progress < 0.5 ? 
                progress * 2 : 
                1 - (progress - 0.5) * 2;
            
            lens.material.opacity = 0.8 + intensity * 0.2;
            lens.energyMaterial.opacity = 0.9 + intensity * 0.1;
            lens.coreMaterial.opacity = 1 + intensity * 0.5;
            
            // Shake effect
            this.glasses.rotation.z = Math.sin(progress * Math.PI * 10) * 0.1;
            
            // Light effects
            this.lights.forEach(light => {
                light.intensity = 1 + intensity * 2;
            });
            
            requestAnimationFrame(animateFlash);
        } else {
            // Reset glasses
            lens.material.opacity = 0.8;
            lens.energyMaterial.opacity = 0.9;
            lens.coreMaterial.opacity = 1;
            this.glasses.rotation.z = 0;
            this.glasses.userData.isActive = false;
            
            // Switch to next room
            this.switchRoom();
        }
    };
    
    // Trigger audio effect
    if (window.app && window.app.audioVisualizer) {
        window.app.audioVisualizer.triggerVisualization('teleport');
    }
    
    // Create screen flash
    const flash = document.createElement('div');
    flash.className = 'teleport-flash';
    document.body.appendChild(flash);
    setTimeout(() => flash.remove(), 500);
    
    animateFlash();
  }

  switchRoom() {
    // (Keep original room switching code unchanged)
    // ... [Previous room switching code] ...
  }

  animate() {
    requestAnimationFrame(() => this.animate());

    // Camera movement based on mouse
    this.camera.position.x += (this.mouse.x * 2 - this.camera.position.x) * 0.02;
    this.camera.position.y += (-this.mouse.y * 1 - this.camera.position.y) * 0.02;
    this.camera.lookAt(0, 0, 0);

    // Animate particles
    this.particles.forEach(particle => {
        particle.rotation.y += 0.002;
        const positions = particle.geometry.attributes.position.array;
        for (let i = 1; i < positions.length; i += 3) {
            positions[i] += Math.sin(Date.now() * 0.001 + i) * 0.001;
        }
        particle.geometry.attributes.position.needsUpdate = true;
    });

    // Dynamic lighting
    this.lights.forEach((light, index) => {
        light.intensity = 0.8 + Math.sin(Date.now() * 0.001 + index) * 0.2;
    });

    // Glasses animations if they exist
    if (this.glasses && this.glasses.userData) {
        // Pulsing energy in lenses
        const energyPulse = 0.9 + Math.sin(Date.now() * 0.008) * 0.3;
        this.glasses.userData.lensEffect.energyMaterial.opacity = energyPulse;
        
        const corePulse = 1 + Math.sin(Date.now() * 0.012) * 0.2;
        this.glasses.userData.lensEffect.coreMaterial.opacity = corePulse;
        
        // Rotating energy rings
        this.glasses.userData.animation.energyRing[0].rotation.z += 0.02;
        this.glasses.userData.animation.energyRing[1].rotation.z -= 0.02;
        
        // Pulsing energy cores
        const coreScale = 1 + Math.sin(Date.now() * 0.01) * 0.2;
        this.glasses.userData.animation.core[0].scale.set(coreScale, coreScale, 1);
        this.glasses.userData.animation.core[1].scale.set(coreScale, coreScale, 1);
        
        // Gentle floating animation
        this.glasses.position.y = 0.1 + Math.sin(Date.now() * 0.002) * 0.03;
        this.glasses.rotation.y = Math.PI + Math.sin(Date.now() * 0.001) * 0.02;
    }

    this.renderer.render(this.scene, this.camera);
  }
}


class AudioVisualizer {
  constructor() {
    this.container = document.getElementById('audioVisualizer');
    this.bars = [];
    this.isActive = false;
    this.audioContext = null;
    this.analyser = null;
    this.dataArray = null;
    this.audioElement = new Audio('teleport.wav');
    this.audioElement.preload = 'auto';
    
    // Pre-load the audio file
    this.audioElement.load();
    this.initVisualizer();
  }

  async initAudio() {
    try {
      console.log('Initializing audio context...');
      this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const source = this.audioContext.createMediaElementSource(this.audioElement);
      this.analyser = this.audioContext.createAnalyser();
      this.analyser.fftSize = 32;
      source.connect(this.analyser);
      this.analyser.connect(this.audioContext.destination);
      this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);
      
      // iOS/Safari requires explicit resume
      if (this.audioContext.state === 'suspended') {
        console.log('Resuming suspended audio context...');
        await this.audioContext.resume();
      }
      return true;
    } catch (e) {
      console.error('Audio initialization failed:', e);
      return false;
    }
  }

  initVisualizer() {
    // Create visualizer bars
    for (let i = 0; i < 12; i++) {
      const bar = document.createElement('div');
      bar.className = 'visualizer-bar';
      bar.style.height = '10px';
      bar.style.background = `hsl(${270 + i * 5}, 80%, 50%)`;
      this.container.appendChild(bar);
      this.bars.push(bar);
    }
  }

  async playTeleportSound() {
    console.log('Attempting to play sound...');
    
    // Initialize audio if not already done
    if (!this.audioContext) {
      const success = await this.initAudio();
      if (!success) return;
    }

    try {
      // Handle iOS/Safari suspension
      if (this.audioContext.state === 'suspended') {
        console.log('Audio context suspended, attempting to resume...');
        await this.audioContext.resume();
      }

      console.log('Playing audio...');
      this.audioElement.currentTime = 0;
      await this.audioElement.play().catch(e => {
        console.error("Audio playback failed:", e);
      });
    } catch (e) {
      console.error('Audio playback error:', e);
    }
  }

  async triggerVisualization(type) {
    if (this.isActive) return;
    
    console.log(`Triggering ${type} visualization...`);
    await this.playTeleportSound();
    
    this.isActive = true;
    const patterns = {
      teleport: [90, 30, 70, 20, 80, 40, 60, 30, 90, 50, 70, 40],
      sound: [40, 70, 50, 80, 60, 90, 50, 70, 60, 80, 50, 70],
      mystery: [30, 60, 40, 70, 50, 80, 40, 60, 50, 70, 40, 60]
    };

    const pattern = patterns[type] || patterns.teleport;
    let frame = 0;
    const maxFrames = type === 'teleport' ? 60 : 120;

    const animate = () => {
      if (frame >= maxFrames) {
        this.isActive = false;
        this.bars.forEach(bar => bar.style.height = '10px');
        return;
      }

      this.bars.forEach((bar, index) => {
        const intensity = pattern[index] * (1 - frame / maxFrames) * 
          (type === 'teleport' ? Math.random() * 2 : Math.random());
        bar.style.height = Math.max(10, intensity) + 'px';
        
        if (type === 'teleport') {
          bar.style.opacity = 0.5 + Math.random() * 0.5;
        }
      });

      frame++;
      requestAnimationFrame(animate);
    };

    animate();
  }
}

// Team Management System
class TeamSystem {
  constructor() {
    this.members = document.querySelectorAll('.team-member');
    this.currentMember = 0;
    this.autoRotate();
  }

  showMember(index) {
    this.members.forEach(member => member.classList.remove('active'));
    if (this.members[index]) {
      this.members[index].classList.add('active');
      this.currentMember = index;
    }
  }

  autoRotate() {
    setInterval(() => {
      this.currentMember = (this.currentMember + 1) % this.members.length;
      this.showMember(this.currentMember);
    }, 5000);
  }
}

// Navigation System
class NavigationSystem {
  constructor() {
    this.navItems = document.querySelectorAll('.nav-item');
    this.sections = document.querySelectorAll('.content-section');
    this.currentSection = 'room';
    this.init();
  }

  init() {
    this.navItems.forEach(item => {
      item.addEventListener('click', () => {
        const scene = item.dataset.scene;
        this.switchScene(scene);
      });
    });
  }

  switchScene(scene) {
    // Update nav active state
    this.navItems.forEach(item => {
      item.classList.toggle('active', item.dataset.scene === scene);
    });

    // Hide all sections
    this.sections.forEach(section => {
      section.classList.remove('active');
    });

    // Show target section (except for room which shows the 3D scene)
    if (scene !== 'room') {
      const targetSection = document.getElementById(`section-${scene}`);
      if (targetSection) {
        targetSection.classList.add('active');
        
        // If switching to video section, ensure intro video is showing
        if (scene === 'video') {
          restartExperience();
        }
      }
    }

    this.currentSection = scene;
  }
}




class InteractionSystem {
    constructor() {
    this.panel = document.getElementById('interactionPanel');
    this.glassesButtons = document.querySelectorAll('.glasses-button');
    this.init();
  }

  init() {
    setTimeout(() => {
      if (this.panel) {
        this.panel.classList.add('active');
      }
    }, 2000);

    this.glassesButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        const glassesType = button.dataset.glasses;
        this.triggerGlasses(glassesType, button, e);
      });
    });
  }

  triggerGlasses(type, button, clickEvent) {
    button.classList.add('active');
    
    // Play sound and trigger visualization
    if (window.app && window.app.audioVisualizer) {
      window.app.audioVisualizer.playTeleportSound();
      window.app.audioVisualizer.triggerVisualization(type);
    }
    
    const flash = document.createElement('div');
    flash.className = 'teleport-flash';
    document.body.appendChild(flash);
    
    setTimeout(() => {
      button.classList.remove('active');
      flash.remove();
      
      if (window.app && window.app.scene) {
        window.app.scene.useGlasses();
      }
    }, 1000);
  }
}







// Video Room Functions
function showVideoRoom() {
  const videoOverlay = document.getElementById('videoRoomOverlay');
  videoOverlay.classList.add('active');
}

function closeVideoRoom() {
  const videoOverlay = document.getElementById('videoRoomOverlay');
  videoOverlay.classList.remove('active');
}

// Section Close Function
function closeSection() {
  // Hide all content sections
  document.querySelectorAll('.content-section').forEach(section => {
    section.classList.remove('active');
  });
  
  // Set Room as active in navigation
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.toggle('active', item.dataset.scene === 'room');
  });
  
  // Update navigation system current section
  if (window.app && window.app.navigationSystem) {
    window.app.navigationSystem.currentSection = 'room';
  }
}

// Resize handler
window.addEventListener('resize', () => {
  if (window.app && window.app.scene) {
    window.app.scene.camera.aspect = window.innerWidth / window.innerHeight;
    window.app.scene.camera.updateProjectionMatrix();
    window.app.scene.renderer.setSize(window.innerWidth, window.innerHeight);
  }
});

</script>
</body>
</html>
